var D=function(){F.fillStyle=p,F.fillRect(0,0,E,O)},$=function(N,q,B,A,M){const W=N*B,Y=q*B;if(M)F.fillStyle=M,F.fillRect(W+1,Y+1,B-2,B-2);F.strokeStyle=A,F.strokeRect(W,Y,B,B)},V=function(N,q,B){$(N,q,H*3,g,B);for(let A=0;A<3;A++)for(let M=0;M<3;M++)$(N*3+M,q*3+A,H,w)},k=function(N,q){if(Q[q][N]!==null){F.font="bold 60px Arial",F.textBaseline="middle",F.textAlign="center";const B=N*H+Math.floor(H*0.5),A=q*H+Math.floor(H*0.575);F.fillText(Q[q][N].toString(),B,A)}else{F.fillStyle="#000",F.font="16px Arial",F.textBaseline="top",F.textAlign="start";const B=K[q][N],A=Math.max(H-2,Math.floor(H*0.8)),M=Math.floor(A/3),W=Math.max(1,Math.floor(H*0.1)),Y=N*H+W,J=q*H+W;for(let U=1;U<=9;U++){const _=B.includes(U)?U:null,L=(U-1)%3,f=Math.floor((U-1)/3),T=Y+M*L,h=J+M*f;F.fillText(_!==null?_.toString():"",T,h)}}},G=function(){for(let N=0;N<9;N++)for(let q=0;q<9;q++)k(q,N)},b=function(){D();for(let N=0;N<3;N++)for(let q=0;q<3;q++)V(q,N)},z=function(N,q,B){for(let A=0;A<9;A++){if(A!==q)I(N,A);if(A!==B)P(N,A)}},C=function(N){if(N.stopPropagation(),R===null)return;const q=R[0],B=R[1];let A=parseInt(N.key);if(isNaN(A)||A<1||A>9)return;if(Q[B][q]===A)Q[B][q]=null,I(A,B),P(A,q);else z(A,q,B),m(A,q,B),S(A,q,B),Q[B][q]=A;b(),G()},m=function(N,q,B){for(let A=0;A<9;A++){if(Q[B][A]===N)Q[B][A]=null;if(K[B][A].includes(N))K[B][A].splice(K[B][A].indexOf(N),1)}},S=function(N,q,B){for(let A=0;A<9;A++){if(Q[A][q]===N)Q[A][q]=null;if(K[A][q].includes(N))K[A][q].splice(K[A][q].indexOf(N),1)}},I=function(N,q){for(let B=0;B<9;B++)if(!K[q][B].includes(N))K[q][B].push(N)},P=function(N,q){for(let B=0;B<9;B++)if(!K[B][q].includes(N))K[B][q].push(N)},Z=new WebSocket(`ws://${location.host}`);Z.onopen=()=>setInterval(()=>Z.send("ping"),5000);Z.onmessage=(N)=>{if(N.data!=="Well received")console.log(N.data);if(N.data==="reload")location.reload()};var p="#DDD",w="#AAA",g="#000",X=document.getElementById("sudokuCanvas"),F=X.getContext("2d"),E=X.width,O=X.height,H=Math.round(Math.min(E,O)/9),K=[],Q=[];for(let N=0;N<9;N++){K.push([]),Q.push([]);for(let q=0;q<9;q++)K[N].push([1,2,3,4,5,6,7,8,9]),Q[N].push(null)}b();G();var R=null;X.addEventListener("mousemove",(N)=>{N.stopPropagation();const{offsetX:q,offsetY:B}=N,A=Math.min(Math.floor(q/H),8),M=Math.min(Math.floor(B/H),8);if(R===null||R[0]!==A||R[1]!==M)R=[A,M]});X.addEventListener("mouseout",(N)=>{N.stopPropagation(),R=null});window.addEventListener("keyup",C);console.log("Frontend charg\xE9");
