var V=function(){U.fillStyle=D,U.fillRect(0,0,F,f)},O=function(A,B,H,q,K){const M=A*H,Q=B*H;if(K)U.fillStyle=K,U.fillRect(M+1,Q+1,H-2,H-2);U.strokeStyle=q,U.strokeRect(M,Q,H,H)},g=function(A,B,H){O(A,B,W*3,C,H);for(let q=0;q<3;q++)for(let K=0;K<3;K++)O(A*3+K,B*3+q,W,z)},p=function(A,B){if(R[B][A]!==null){U.font="bold 60px Arial",U.textBaseline="middle",U.textAlign="center";const H=A*W+Math.floor(W*0.5),q=B*W+Math.floor(W*0.575);U.fillText(R[B][A].toString(),H,q)}else{U.fillStyle="#000",U.font="16px Arial",U.textBaseline="top",U.textAlign="start";const H=N[B][A],q=Math.max(W-2,Math.floor(W*0.8)),K=Math.floor(q/3),M=Math.max(1,Math.floor(W*0.1)),Q=A*W+M,T=B*W+M;for(let _=1;_<=9;_++){const E=H.includes(_)?_:null,h=(_-1)%3,X=Math.floor((_-1)/3),Y=Q+K*h,w=T+K*X;U.fillText(E!==null?E.toString():"",Y,w)}}},I=function(){for(let A=0;A<9;A++)for(let B=0;B<9;B++)p(B,A)},P=function(){V();for(let A=0;A<3;A++)for(let B=0;B<3;B++)g(B,A)},S=function(A,B,H){for(let q=0;q<9;q++){if(q!==B&&R[H][q]===A)J(A,q);if(q!==H&&R[q][B]===A)L(A,q);if(q!==B&&q!==H&&R[Math.floor(H/3)*3+Math.floor(q/3)][Math.floor(B/3)*3+q%3]===A)G(A,q,q)}},k=function(A){if(A.stopPropagation(),Z===null)return;const B=Z[0],H=Z[1];let q=parseInt(A.key);if(isNaN(q)||q<1||q>9)return;if(R[H][B]===q)R[H][B]=null,J(q,H),L(q,B),G(q,B,H);else S(q,B,H),m(q,B,H),d(q,B,H),t(q,B,H),R[H][B]=q;P(),I()},m=function(A,B,H){for(let q=0;q<9;q++){if(R[H][q]===A)R[H][q]=null;if(N[H][q].includes(A))N[H][q].splice(N[H][q].indexOf(A),1)}},d=function(A,B,H){for(let q=0;q<9;q++){if(R[q][B]===A)R[q][B]=null;if(N[q][B].includes(A))N[q][B].splice(N[q][B].indexOf(A),1)}},t=function(A,B,H){const q=Math.floor(B/3),K=Math.floor(H/3);for(let M=0;M<3;M++)for(let Q=0;Q<3;Q++){if(R[K*3+M][q*3+Q]===A)R[K*3+M][q*3+Q]=null;if(N[K*3+M][q*3+Q].includes(A))N[K*3+M][q*3+Q].splice(N[K*3+M][q*3+Q].indexOf(A),1)}},J=function(A,B){for(let H=0;H<9;H++)if(!N[B][H].includes(A))N[B][H].push(A)},L=function(A,B){for(let H=0;H<9;H++)if(!N[H][B].includes(A))N[H][B].push(A)},G=function(A,B,H){const q=Math.floor(B/3),K=Math.floor(H/3);for(let M=0;M<3;M++)for(let Q=0;Q<3;Q++)if(!N[K*3+M][q*3+Q].includes(A))N[K*3+M][q*3+Q].push(A)},b=new WebSocket(`ws://${location.host}`);b.onopen=()=>setInterval(()=>b.send("ping"),5000);b.onmessage=(A)=>{if(A.data!=="Well received")console.log(A.data);if(A.data==="reload")location.reload()};var D="#DDD",z="#AAA",C="#000",$=document.getElementById("sudokuCanvas"),U=$.getContext("2d"),F=$.width,f=$.height,W=Math.round(Math.min(F,f)/9),N=[],R=[];for(let A=0;A<9;A++){N.push([]),R.push([]);for(let B=0;B<9;B++)N[A].push([1,2,3,4,5,6,7,8,9]),R[A].push(null)}P();I();var Z=null;$.addEventListener("mousemove",(A)=>{A.stopPropagation();const{offsetX:B,offsetY:H}=A,q=Math.min(Math.floor(B/W),8),K=Math.min(Math.floor(H/W),8);if(Z===null||Z[0]!==q||Z[1]!==K)Z=[q,K]});$.addEventListener("mouseout",(A)=>{A.stopPropagation(),Z=null});window.addEventListener("keyup",k);console.log("Frontend charg\xE9");
