var w=function(){T.fillStyle=P,T.fillRect(0,0,f,Y)},J=function(q,A,K,B,H){const Q=q*K,$=A*K;if(H)T.fillStyle=H,T.fillRect(Q+1,$+1,K-2,K-2);T.strokeStyle=B,T.strokeRect(Q,$,K,K)},y=function(q,A,K){J(q,A,O*3,p,K);for(let B=0;B<3;B++)for(let H=0;H<3;H++)J(q*3+H,A*3+B,O,V)},g=function(q,A){T.fillStyle="#000",T.font="16px Arial",T.textBaseline="top",T.textAlign="start";const K=Math.max(O-2,Math.floor(O*0.8)),B=Math.floor(K/3),H=Math.max(1,Math.floor(O*0.1)),Q=L[A][q];let $=!0;for(let W=0;W<9;W++)if(U[A][q][W]!==null)$=!1;if(!$){const W=q*O+H,Z=A*O+H;for(let R=0;R<9;R++){const E=U[A][q][R],M=R%3,N=Math.floor(R/3),b=W+B*M,G=Z+B*N;T.fillText(E!==null?E.toString():"",b,G)}}else{const W=q*O+H,Z=A*O+H;for(let R=1;R<=9;R++){const E=Q.includes(R)?R:null,M=(R-1)%3,N=Math.floor((R-1)/3),b=W+B*M,G=Z+B*N;T.fillText(E!==null?E.toString():"",b,G)}}},h=function(){for(let q=0;q<9;q++)for(let A=0;A<9;A++)g(A,q)},D=function(){w();for(let q=0;q<3;q++)for(let A=0;A<3;A++)y(A,q)},m=function(q){if(q.stopPropagation(),_===null)return;const A=parseInt(q.key);if(isNaN(A)||A<1||A>9)return;const[K,B]=_,H=Math.floor((X.x-K*O)/(O/3)),Q=Math.floor((X.y-B*O)/(O/3)),$=H+Q*3;let W=!1;if(U[B][K].includes(A)){for(let Z=0;Z<9;Z++)if(U[B][K][Z]===A)W=!0,U[B][K][Z]=null}if(z(B,Q,A),k(K,Q,A),!W)U[B][K][$]=A;D(),h()},z=function(q,A,K){for(let B=0;B<9;B++){let H=null;switch(A){case 0:H=[0,1,2];break;case 1:H=[3,4,5];break;case 2:H=[6,7,8];break}H.forEach((Q)=>{if(U[q][B][Q]===K)U[q][B][Q]=null})}},k=function(q,A,K){for(let B=0;B<9;B++){let H=null;switch(A){case 0:H=[0,1,2];break;case 1:H=[3,4,5];break;case 2:H=[6,7,8];break}H.forEach((Q)=>{if(U[B][q][Q]===K)U[B][q][Q]=null})}},I=new WebSocket(`ws://${location.host}`);I.onopen=()=>setInterval(()=>I.send("ping"),5000);I.onmessage=(q)=>{if(q.data!=="Well received")console.log(q.data);if(q.data==="reload")location.reload()};var P="#DDD",V="#AAA",p="#000",F=document.getElementById("sudokuCanvas"),T=F.getContext("2d"),f=F.width,Y=F.height,O=Math.round(Math.min(f,Y)/9),L=[],U=[];for(let q=0;q<9;q++){L.push([]),U.push([]);for(let A=0;A<9;A++)L[q].push([1,2,3,4,5,6,7,8,9]),U[q].push([1,2,3,4,5,6,7,8,9])}D();h();var _=null,X=null;F.addEventListener("mousemove",(q)=>{q.stopPropagation();const{offsetX:A,offsetY:K}=q,B=Math.min(Math.floor(A/O),8),H=Math.min(Math.floor(K/O),8);if(X={x:A,y:K},_===null||_[0]!==B||_[1]!==H)_=[B,H]});F.addEventListener("mouseout",(q)=>{q.stopPropagation(),_=null,console.log("Celulle s\xE9lectionn\xE9e:",_)});window.addEventListener("keyup",m);console.log("Frontend charg\xE9");
